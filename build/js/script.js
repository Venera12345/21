var t,o,n,a,e,r,i,s,l,c,u,d,m,p,w,f,h,y,g,S,q,b,v,D,C,L,k,E,T,x;function A(e){e.classList.add("show")}function G(e){e.classList.remove("show")}function N(e){var t=b.cloneNode(!0);t.classList.add(e.animation),v.appendChild(t),t.style.left=e.left+"%",t.style.bottom=e.bottom+"%";var o=e.place.querySelector(".item-player-card");o?o.parentNode.removeChild(o):t.style.transform="translateX("+e.transform+"%)",e.place.appendChild(v)}function M(t,o,n,a){var e=o[a].place.querySelectorAll(".item-card");return[].forEach.call(e,function(e){return window.card.openCard(e,n[t],o[a]),++t}),0<o[a].transform?o[a].transform+=25:o[a].transform-=25,setTimeout(function(){D(o,n,t,a)},1e3),t}function j(t,o,n,a){setTimeout(function(){window.deal.dealCard(t[a]);var e=t[a].place.querySelectorAll(".item-card");return setTimeout(function(){return window.card.openCard(e[e.length-1],o[n],t[a]),n++},500),0<t[a].transform?t[a].transform+=25:t[a].transform-=25,setTimeout(function(){D(t,o,n,a)},1500),n},1e3)}function F(e){setTimeout(function(){e.classList.add("show")},1e3)}t=document.querySelector(".btn-distribution"),o=document.querySelector(".btn-still"),n=document.querySelector(".btn-stop"),a=document.querySelectorAll(".item-player"),e=document.querySelectorAll(".again"),r=0,t.addEventListener("click",function(){amountGamer=window.popup.amountGamer,window.deal.dealCard(window.gamerData.user),setTimeout(function(){window.deal.dealCard(window.gamerData.user),window.gamerData.user.currentTransform+=40},700),setTimeout(function(){var e=window.gamerData.user.place.querySelectorAll(".item-card");[].forEach.call(e,function(e){return window.card.openCard(e,window.popup.rundom[r],window.gamerData.user),r++,t.disabled="disabled",r})},2200),2<amountGamer?(window.gamerData.gamers[0].bottom=60,window.gamerData.gamers[1].bottom=60):(window.gamerData.gamers[0].bottom=0,window.gamerData.gamers[1].bottom=0);for(var e=0;e<amountGamer;e++)window.deal.dealCardForGamer(window.gamerData.gamers[e])}),o.addEventListener("click",function(){window.gamerData.user.transform+=40,window.deal.dealCard(window.gamerData.user),setTimeout(function(){var e=window.gamerData.user.place.querySelectorAll(".item-card");return window.card.openCard(e[e.length-1],window.popup.rundom[r],window.gamerData.user),++r},1e3),window.total.congratulateUser(window.gamerData.user)}),n.addEventListener("click",function(){console.log(r),o.disabled="disabled",n.disabled="disabled",window.dealGamer.openCardGemer(r,window.gamerData.gamers,window.popup.rundom,0)}),[].forEach.call(e,function(e){e.addEventListener("click",function(){return e.parentElement.classList.remove("show"),r=0,window.popup.popupAmount.classList.add("show"),window.gamerData.user.transform=40,window.gamerData.user.sum=0,window.gamerData.gamers.forEach(function(e,t){e.sum=0,e.transform=0===t||2===t?25:-25}),t.removeAttribute("disabled"),o.removeAttribute("disabled"),n.removeAttribute("disabled"),document.querySelector(".user-points-block .user-points").textContent="0",[].forEach.call(a,function(e){window.cleanDesk(e)}),r})}),l=document.querySelector(".wellcom"),c=document.querySelector(".name-main-user"),u=document.querySelector(".amount-users"),d=document.querySelector(".begin"),m=document.querySelector(".name-btn"),p=document.querySelector(".input-btn"),w=document.querySelector(".text-name-js"),f=document.querySelector(".gamers-btn"),h=document.querySelector(".amount"),y=document.querySelectorAll(".item-player"),g=document.querySelector(".user-name"),S=document.querySelector(".user .list-player-cards"),q=1,A(l),d.addEventListener("click",function(){G(l),A(c)}),m.addEventListener("click",function(){w.textContent=p.value,g.textContent=p.value,G(c),A(u)}),f.addEventListener("click",function(){i=h.value,1===q&&(window.help(),q++),[].forEach.call(y,function(e,t){return t+1<=i&&(e.classList.remove("hidden"),S.style.height=2<i?"217px":"320px"),G(u),s=window.shuffle([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,0])}),window.popup={amountGamer:i,rundom:s,popupAmount:u}}),b=document.querySelector("#card").content.querySelector(".item-card"),v=document.createDocumentFragment(),window.deal={dealCard:N,dealCardForGamer:function(e){setTimeout(function(){N(e),setTimeout(function(){N(e)},500)},e.time)}},window.cardsData=[{class:"six-b",point:6},{class:"seven-b",point:7},{class:"eight-b",point:8},{class:"nine-b",point:9},{class:"ten-b",point:10},{class:"jb",point:2},{class:"lb",point:3},{class:"kb",point:4},{class:"ab",point:11},{class:"six-t",point:6},{class:"seven-t",point:7},{class:"eight-t",point:8},{class:"nine-t",point:9},{class:"ten-t",point:10},{class:"jt",point:2},{class:"lt",point:3},{class:"kt",point:4},{class:"at",point:11},{class:"six-p",point:6},{class:"seven-p",point:7},{class:"eight-p",point:8},{class:"nine-p",point:9},{class:"ten-p",point:10},{class:"jp",point:2},{class:"lp",point:3},{class:"kp",point:4},{class:"ap",point:11},{class:"six-h",point:6},{class:"seven-h",point:7},{class:"eight-h",point:8},{class:"nine-h",point:9},{class:"ten-h",point:10},{class:"jh",point:2},{class:"lh",point:3},{class:"kh",point:4},{class:"ah",point:11}],window.shuffle=function(e){for(var t,o,n=e.length;0!==n;)o=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[o],e[o]=t;return e},D=function(e,t,o,n){var a,r,i=(a=0,r=100,a=Math.ceil(a),r=Math.floor(r),Math.floor(Math.random()*(r-a+1))+a),s=window.popup.amountGamer;e[n].sum<=10?j(e,t,o,n):10<e[n].sum&&e[n].sum<=14&&i<=98?j(e,t,o,n):14<e[n].sum&&e[n].sum<=17&&i<=78?j(e,t,o,n):17<e[n].sum&&e[n].sum<=19&&i<=30?j(e,t,o):19<e[n].sum&&i<=3?j(e,t,o,n):21===e[n].sum?n!==s-1?C(e,o,t,s,n+1):(console.log("результат"),window.total.compareSum()):21<e[n].sum?n!==s-1?C(e,o,t,s,n+1):(console.log("результат"),window.total.compareSum()):n!==s-1?C(e,o,t,s,n+1):(window.total.compareSum(),console.log("результат"))},C=function(e,t,o,n,a){1<n&&M(t+=1,e,o,a)},window.dealGamer={openCardGemer:M,setOfPoints:j,checkPoint:D},window.card={openCard:function(e,t,o){var n=window.cardsData[t];e.classList.add("rotate"),setTimeout(function(){e.classList.add(n.class),function(e,t){t.sum+=e,t.sum}(n.point,o),o.span.textContent=o.sum,window.total.congratulateUser(window.gamerData.user)},500)}},L={place:document.querySelector(".list-player-cards.main-user"),animation:"animation",left:30,bottom:0,span:document.querySelector(".user-points"),sum:0,transform:40},k=[{place:document.querySelector(".list-player-cards.gamer.first"),animation:"animation-l-t",left:0,bottom:0,span:document.querySelector(".player-points.first"),sum:0,transform:25,time:3e3},{place:document.querySelector(".list-player-cards.gamer.second"),animation:"animation-r-t",left:88,bottom:0,span:document.querySelector(".player-points.second"),sum:0,transform:-25,time:4e3},{place:document.querySelector(".list-player-cards.gamer.third"),animation:"animation-l-b",left:0,bottom:0,span:document.querySelector(".player-points.third"),sum:0,transform:25,time:5e3},{place:document.querySelector(".list-player-cards.gamer.fourth"),animation:"animation-r-b",left:88,bottom:0,span:document.querySelector(".player-points.fourth"),sum:0,transform:-25,time:6e3}],window.gamerData={user:L,gamers:k},E=document.querySelector(".cogratulation"),T=document.querySelector(".game-over"),x=document.querySelector(".game-dead-heat"),window.total={compareSum:function(){if(21<window.gamerData.user.sum)F(T);else{var e=window.gamerData.gamers.filter(function(e){return e.sum>window.gamerData.user.sum&&e.sum<=21}),t=window.gamerData.gamers.filter(function(e){return e.sum===window.gamerData.user.sum});0<e.length?F(T):0<t.length?F(x):F(E)}},congratulateUser:function(e){21===e.sum&&F(E)}},window.cleanDesk=function(e){var t=e.querySelectorAll(".item-card"),o=e.querySelector(".list-player-cards");if([].forEach.call(t,function(e){e.parentNode.removeChild(e)}),!e.querySelector(".item-player-card")){var n=document.createElement("li");n.classList.add("item-player-card"),o.appendChild(n)}e.querySelector(".player-points")&&(e.querySelector(".player-points").textContent="0",e.classList.add("hidden"))},window.help=function(){function t(e,t,o,n){var a=r.cloneNode(!0);a.classList.add(o),a.classList.add(n),a.querySelector(".text-help").textContent=t,e.appendChild(a)}var r=document.querySelector("#help").content.querySelector(".help"),e=document.querySelector(".deck"),o=document.querySelector(".footer");t(e,"Push button, that cards distribution players","animation-help"),setTimeout(function(){var e=document.querySelector(".animation-help");e.parentNode.removeChild(e),t(o,"If you need more, push this button","animation-help-more","help-more")},5e3),setTimeout(function(){var e=document.querySelector(".help-more");e.parentNode.removeChild(e),t(o,"When you will finish to set points, push on button and you know points other gamers","animation-help-more","help-stop")},9e3),setTimeout(function(){var e=document.querySelector(".help-stop");e.parentNode.removeChild(e)},14e3)};